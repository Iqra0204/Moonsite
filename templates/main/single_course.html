{% extends 'base.html' %}
{% block title%}Single-course {% endblock %}

{% block content %}


<script>
$(document).ready(function(){

	$(".filter-checkbox").on('click', function(){
		var filter_object={};
		$(".filter-checkbox").each(function(index,ele){
			var filter_value=$(this).val();
			var filter_key=$(this).data('filter');
		    console.log(filter_key,filter_value);
			filter_object[filter_key]=Array.from(document.querySelectorAll('input[data-filter='+filter_key+']:checked')).map(function(el){
			 	return el.value;
			});
		});

		$.ajax({
			url:'{% url 'filter_courses' %}',
			data:filter_object,
			dataType:'json',
			success:function(res){
			    console.log(res)
				$("#filteredCourses").html(res.data);
				var filter_value=$(this).val();
			    var filter_key=$(this).data('filter');
			}
		});
	});
});
</script>

<section data-jarallax data-speed=".8" class="jarallax py-12 pt-xl-14 mt-n12 pb-xl-14 bg-cover position-relative" style="background-image: url(/static/assets/img/patterns/pattern-2.svg)">
        <div class="container mt">
            <div class="row align-items-center">
                <div class="col-12 col-md-5 col-lg-6 order-md-2" data-aos="fade-in">

                    <!-- Image -->
                    <img src="/static/assets/img/illustrations/illustration-4.svg" class="img-fluid ms-xl-5 mb-6 mb-md-0 mw-md-150 mw-lg-130" alt="...">

                </div>
                <div class="col-12 col-md-7 col-lg-6 order-md-1">
                    <!-- Heading -->
                    <h1 class="display-2 text-white text-orange" data-aos="fade-left" data-aos-duration="150">We Can Teach You!</h1>

                    <!-- Text -->
                    <p class="text-white text-capitalize" data-aos="fade-up" data-aos-duration="200">Technology is bringing a massive wave of evolution on learning things in different ways.</p>

                    <!-- Buttons -->
<!--                    <a href="{% url 'course' %}" class="btn btn-pill btn-helio btn-x-wide text-white shadow lift mb-5 mt-1" data-aos="fade-up" data-aos-duration="200">START A FREE TRIAL</a>-->
                </div>
            </div>
        </div>
    </section>
  <img class="position-absolute position-center-y right-0 mw-300p mw-xl-450p me-md-6 d-none d-lg-block img-fluid" src="/static/assets/img/illustrations/illustration-1.png" alt="...">
 <header data-jarallax="" data-speed=".8" class="jarallax py-12 pt-xl-14 mt-n12 pb-xl-14 bg-cover position-relative" style="background-image: none;" data-jarallax-original-styles="background-image: url(static/assets/img/patterns/pattern-2.svg)">






    <!-- COURSE
    ================================================== -->
    <div class="container">
        <div class="row">
            <div class="col-xl-3 mb-5 mb-xl-0">
                <!-- SIDEBAR FILTER
                ================================================== -->
                <div class=" vertical-scroll" id="courseSidebar">
                    <div class="border rounded mb-6 bg-white">
                        <!-- Heading -->
                        <div id="coursefilter1">
                            <h4 class="mb-0">
                                <button class="p-6 text-dark fw-medium d-flex align-items-center collapse-accordion-toggle line-height-one" type="button" data-bs-toggle="collapse" data-bs-target="#coursefiltercollapse1" aria-expanded="true" aria-controls="coursefiltercollapse1">
                                    Category
                                    <span class="ms-auto text-dark d-flex">
                                        <!-- Icon -->
                                        <svg width="15" height="2" viewBox="0 0 15 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="15" height="2" fill="currentColor"/>
                                        </svg>

                                        <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M0 7H15V9H0V7Z" fill="currentColor"/>
                                            <path d="M6 16L6 8.74228e-08L8 0L8 16H6Z" fill="currentColor"/>
                                        </svg>

                                    </span>
                                </button>
                            </h4>
                        </div>

                        <div id="coursefiltercollapse1" class="collapse show mt-n2 px-6 pb-6" aria-labelledby="coursefilter1" data-parent="#courseSidebar">
                            <ul class="list-unstyled list-group list-checkbox">
                                {% for i in categories %}
    <li class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input filter-checkbox" id="category-{{i.id}}" data-filter="category" value="{{i.id}}">
        <label class="custom-control-label font-size-base" for="category-{{i.id}}">{{i}} ({{i.course_set.all.count}})</label>
    </li>
{% endfor %}
                            </ul>

                        </div>
                    </div>



                    <div class="border rounded mb-6 bg-white">
                        <!-- Heading -->
                        <div id="coursefilter3">
                            <h4 class="mb-0">
<!--                                <button class="p-6 text-dark fw-medium d-flex align-items-center collapse-accordion-toggle line-height-one" type="button" data-bs-toggle="collapse" data-bs-target="#coursefiltercollapse3" aria-expanded="true" aria-controls="coursefiltercollapse3">-->
<!--                                    Price-->
<!--                                    <span class="ms-auto text-dark d-flex">-->
<!--                                        &lt;!&ndash; Icon &ndash;&gt;-->
<!--                                        <svg width="15" height="2" viewBox="0 0 15 2" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <rect width="15" height="2" fill="currentColor"/>-->
<!--                                        </svg>-->

<!--                                        <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M0 7H15V9H0V7Z" fill="currentColor"/>-->
<!--                                            <path d="M6 16L6 8.74228e-08L8 0L8 16H6Z" fill="currentColor"/>-->
<!--                                        </svg>-->

<!--                                    </span>-->
<!--                                </button>-->
                            </h4>
                        </div>

<!--                        <div id="coursefiltercollapse3" class="collapse show mt-n2 px-6 pb-6" aria-labelledby="coursefilter3" data-parent="#courseSidebar">-->
<!--                            <ul class="list-unstyled list-group list-checkbox">-->
<!--                                <li class="custom-control custom-radio">-->
<!--                                    <input type="radio" id="price1" name="customRadio" value="Priceall" data-filter="price"   class="custom-control-input filter-checkbox">-->
<!--                                    <label class="custom-control-label font-size-base" for="price1">All ({{course.all.count}})</label>-->
<!--                                </li>-->
<!--                                <li class="custom-control custom-radio">-->
<!--                                    <input type="radio" id="price2" name="customRadio" value="Pricefree" data-filter="price" class="custom-control-input filter-checkbox">-->
<!--                                    <label class="custom-control-label font-size-base" for="price2">Free ({{freecourse}})</label>-->
<!--                                </li>-->
<!--                                <li class="custom-control custom-radio">-->
<!--                                    <input type="radio" id="price3" name="customRadio" value="Pricepaid" data-filter="price"  class="custom-control-input filter-checkbox">-->
<!--                                    <label class="custom-control-label font-size-base" for="price3">Paid ({{paidcourse}})</label>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </div>-->
                    </div>

                    <div class="border rounded mb-6 bg-white">
                        <!-- Heading -->
                        <div id="coursefilter4">
                            <h4 class="mb-0">
                                <button class="p-6 text-dark fw-medium d-flex align-items-center collapse-accordion-toggle line-height-one" type="button" data-bs-toggle="collapse" data-bs-target="#coursefiltercollapse4" aria-expanded="true" aria-controls="coursefiltercollapse4">
                                    Level
                                    <span class="ms-auto text-dark d-flex">
                                        <!-- Icon -->
                                        <svg width="15" height="2" viewBox="0 0 15 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="15" height="2" fill="currentColor"/>
                                        </svg>

                                        <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M0 7H15V9H0V7Z" fill="currentColor"/>
                                            <path d="M6 16L6 8.74228e-08L8 0L8 16H6Z" fill="currentColor"/>
                                        </svg>

                                    </span>
                                </button>
                            </h4>
                        </div>

                        <div id="coursefiltercollapse4" class="collapse show mt-n2 px-6 pb-6" aria-labelledby="coursefilter4" data-parent="#courseSidebar">
                            <ul class="list-unstyled list-group list-checkbox">

{% for i in levels %}
    <li class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input filter-checkbox" id="level-{{i.id}}" value="{{i.id}}" data-filter="level">
        <label class="custom-control-label font-size-base" for="level-{{i.id}}">{{i}} ({{i.course_set.all.count}})</label>
    </li>
{% endfor %}
                            </ul>
                        </div>
                    </div>



                    <a href="#" class="btn btn-primary btn-block mb-10">FILTER RESULTS</a>
                </div>

            </div>

            <div class="col-xl-9">
                <div class="row row-cols-md-2 row-cols-lg-3 mb-3 " id="filteredCourses">
                    {% for i in course %}
                    <div class="col-md pb-4 pb-md-7">
                        <!-- Card -->
                        <div class="card border shadow p-2 lift sk-fade ">
                            <!-- Image -->
                            <div class="card-zoom position-relative">
                                <a href="{{i.get_absolute_url}}" class="card-img sk-thumbnail img-ratio-3 d-block">
                                    <img class="rounded shadow-light-lg" src="media/{{i.featured_images}}" alt="...">
                                </a>





                            </div>

                            <!-- Footer -->
                            <div class="card-footer px-2 pb-2 mb-1 pt-4 position-relative">
                                <!-- Preheading -->
                                <a href="{{i.get_absolute_url}}"><span class="mb-1 d-inline-block text-gray-800"><h5>{{i.category}}</h5></span></a>

                                <!-- Heading -->
                                <div class="position-relative">
<!--                                    <a href="{{i.get_absolute_url}}" class="d-block stretched-link"><h5 class="line-clamp-2 h-md-48 h-lg-58 me-md-8 me-lg-10 me-xl-4 mb-2">{{i}}</h5></a>-->

                                    <div class="row mx-n2 align-items-end">
                                        <div class="col px-2">
                                            <ul class="nav mx-n3">
                                                <li class="nav-item px-3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="me-2 d-flex text-secondary icon-uxs">
                                                            <!-- Icon -->
<!--                                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                                                <path d="M17.1947 7.06802L14.6315 7.9985C14.2476 7.31186 13.712 6.71921 13.0544 6.25992C12.8525 6.11877 12.6421 5.99365 12.4252 5.88303C13.0586 5.25955 13.452 4.39255 13.452 3.43521C13.452 1.54098 11.9124 -1.90735e-06 10.0197 -1.90735e-06C8.12714 -1.90735e-06 6.58738 1.54098 6.58738 3.43521C6.58738 4.39255 6.98075 5.25955 7.61414 5.88303C7.39731 5.99365 7.1869 6.11877 6.98502 6.25992C6.32752 6.71921 5.79178 7.31186 5.40787 7.9985L2.8447 7.06802C2.33612 6.88339 1.79688 7.26044 1.79688 7.80243V16.5178C1.79688 16.8465 2.00256 17.14 2.31155 17.2522L9.75312 19.9536C9.93073 20.018 10.1227 20.0128 10.2863 19.9536L17.7278 17.2522C18.0368 17.14 18.2425 16.8465 18.2425 16.5178V7.80243C18.2425 7.26135 17.704 6.88309 17.1947 7.06802ZM10.0197 1.5625C11.0507 1.5625 11.8895 2.40265 11.8895 3.43521C11.8895 4.46777 11.0507 5.30792 10.0197 5.30792C8.98866 5.30792 8.14988 4.46777 8.14988 3.43521C8.14988 2.40265 8.98866 1.5625 10.0197 1.5625ZM9.23844 18.1044L3.35938 15.9703V8.91724L9.23844 11.0513V18.1044ZM10.0197 9.67255L6.90644 8.54248C7.58164 7.51892 8.75184 6.87042 10.0197 6.87042C11.2875 6.87042 12.4577 7.51892 13.1329 8.54248L10.0197 9.67255ZM16.68 15.9703L10.8009 18.1044V11.0513L16.68 8.91724V15.9703Z" fill="currentColor"/>-->
<!--                                                            </svg>-->
    <form method="post" action="enrollment/{{i.slug}}">
                                    {% csrf_token %}
                                 <button type="submit"  class="btn btn-sm btn-primary">Enrolled</button>
                                  </form>
                                                        </div>




                                                    </div>

                                                </li>

                                            </ul>
                                        </div>

<!--                                        <div class="col-auto px-2 text-right">-->
<!--                                            <div class="star-rating mb-2 mb-lg-0">-->
<!--                                                <div class="rating" style="width:100%;"></div>-->
<!--                                            </div>-->
<!--                                        </div>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                   {% endfor %}
                </div>

                <!-- PAGINATION
                ================================================== -->
                <nav class="mb-11" aria-label="Page navigationa">
                    <ul class="pagination justify-content-center">
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true"><i class="fas fa-arrow-left"></i></span>
                            </a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item active"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true"><i class="fas fa-arrow-right"></i></span>
                            </a>
                        </li>
                    </ul>
                </nav>

            </div>
        </div>
    </div>
{% endblock %}